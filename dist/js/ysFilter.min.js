/**
 * ys-filter - For filtering and sorting products returned from Silk API.
 * @version v1.0.0
 * @link http://youngskilled.com
 * @author richard@youngskilled.com Young/Skilled
 * @license MIT
 */
!function(e,t){var s={init:function(){var l=this;l.addClass("ysFilter--loading ysFilter--init"),l.set.currentHash=t.location.hash,l.set.filterOptions.paging&&(l.set.paging=l.set.filterOptions.paging),"#"==l.set.currentHash?l.set.currentHash="":(l.addClass("ysFilter--filtered"),l.set.updateWHash!==!1&&e("."+l.set.updateWHash).each(function(){var t=e(this).attr("href");e(this).attr("href",t+l.set.currentHash)})),e.ajax({url:l.set.url,type:"GET",cache:!0,dataType:"JSON",success:function(a){l.filter=a,l.set.debug===!0&&console.log("var $this.filter",e.extend({},l.filter)),s.preFilter.apply(l),s.buildFilter.apply(l),s.enableEvents.apply(l),l.set.limit=l.filter.settings.limit,l.set.pages=Math.ceil(l.set.initItems.length/l.set.limit),""!==l.set.currentHash?(l.set.filteredBy=s.dehashify.apply(l,[t.location.hash]),l.set.filteredBy.page>1&&(l.find("."+l.set.paging.prevBtnClass).closest("."+l.set.paging.contClass).show(),l.set.initialLoad=!0),s.gatherItems.apply(l),s.reSelect.apply(l)):l.set.preSort!==!1?s.gatherItems.apply(l):l.set.debug===!0&&s.gatherItems.apply(l)}})},preFilter:function(){var e=this,t=[],l=[],a=[],r=0,i=null,n=null,o=null,d="",c="";if(e.set.initItems=e.filter.products.slice(0),e.set.currentItems=e.set.initItems.slice(0),void 0!==e.set.category&&"/"!==e.set.category){0===e.set.category.indexOf("/")&&(e.set.category=e.set.category.slice(1)),i=e.filter.filter.categories,n=e.filter.settings.filter,o=e.filter.filter;for(var p in i)0===p.indexOf(e.set.category)&&(l[r]=i[p],r++);for(t=Array.prototype.concat.apply([],l),e.set.relevantFilters={},r=0;r<n.length;r++){c=n[r][0].replace(/_\d/,""),d=o[c];for(var f in d)l=[],a=[],l=s.intersect(t,d[f]),l.length>0&&(void 0===e.set.relevantFilters[c]&&(e.set.relevantFilters[c]={}),e.set.relevantFilters[c][f]=l)}t=s.unique(t),e.set.initItems=void 0!==e.filter.related?s.relatedToItems.apply(e,[t]):s.keysToItems.apply(e,[t]),e.set.currentItems=e.set.initItems.slice(0)}},buildFilter:function(){var t=this,l=t.find("."+t.set.groupClass),a="",r="",i={},n=t.filter.settings.filter.length,o=t.set.splitSizes!==!1?"</"+t.set.splitSizes.match(/<([a-z]+)/)[1]+">":"";if(void 0!==t.filter.settings.sort){var d=e("#sort"),c=void 0!==t.filter.settings.sort.init?t.filter.settings.sort.init:"";r=d.data("create"),i=t.set.filterOptions.sort||{};for(var p in t.filter.settings.sort)"init"!==p&&(t.filter.settings.sort[p].asc&&(a+=s.buildFilterTemplate.call(t,r,"sort-"+p+"-asc",'["'+p+'","asc"]',t.filter.settings.sort[p].asc,i)),t.filter.settings.sort[p].dsc&&(a+=s.buildFilterTemplate.call(t,r,"sort-"+p+"-dsc",'["'+p+'","dsc"]',t.filter.settings.sort[p].dsc,i)));void 0!==i.wrapperGroup&&(a=i.wrapperGroup+a+"</"+i.wrapperGroup.match(/<([a-z]+)/)[1]+">"),"fakeSelect"===r&&(t.set.repeatStartFakeSelect&&(a=s.buildFilterTemplate.call(t,"start_"+r,"","",c,i)+a),a='<div class="filterControls-value fake-select"><span class="title" data-orig-text="'+c+'">'+c+'</span><ul class="ul-clean fake-select-list">'+a+"</ul></div>"),("select"===r||"multiSelect"===r)&&(a='<select class="filterControls-value"'+("multiSelect"===r?' multiple="multiple"':"")+'><option value="0">'+c+"</option>"+a+"</select>"),d.append(a)}for(var f=0;n>f;f++){var u=t.filter.settings.filter[f][0],g=u.replace(/_\d/,""),h=t.filter.settings.filter[f][1],v=l.filter("#"+u),m=t.set.relevantFilters||t.filter.filter,y=(v.data("type"),v.data("max-length")||null),C=0,b="",I="",S=null,F=null,w=null,B="",x=[],k=[],A={};a="",r=v.data("create"),i=t.set.filterOptions[u]||{};for(var T in m[g]){if(I=T,void 0!==t.filter.filterDescriptions[g]&&void 0!==t.filter.filterDescriptions[g][T]&&(I=void 0!==t.filter.filterDescriptions[g][T].color_img?[I,t.filter.filterDescriptions[g][T].color_img]:void 0!==t.filter.filterDescriptions[g][T].color_hex?[I,t.filter.filterDescriptions[g][T].color_hex]:t.filter.filterDescriptions[g][T]),-1!==I.indexOf("::")||"categories"===g){if(0!==T.indexOf(t.set.category))continue;if(x=I.split("::"),k=T.split("/"),void 0!==v.data("depth")){if(w=v.data("depth")-1,void 0===x[w])continue;B=k[w],I=x[w],void 0===A[B]&&(a+=s.buildFilterTemplate.call(t,r,u+"-"+B,B,I,i),A[B]=!0)}else I=x.pop(),S="tree",F!==x.join("")&&(null!==F&&(a+=s.buildFilterTemplate.call(t,"group_"+r,"",b,F,i),b=""),F=x.join("")),b+=s.buildFilterTemplate.call(t,r,g+"-"+T,T,I,i)}else t.set.splitSizes!==!1&&"size"===g?(S="size",sizeTables=T.split("_"),F!==sizeTables[0]&&(null!==F&&(a+=t.set.splitSizes+b+o,b=""),F=sizeTables[0]),b+=s.buildFilterTemplate.call(t,r,g+"-"+T,T,I,i)):a+=s.buildFilterTemplate.call(t,r,g+"-"+T,T,I,i);C++}null!==F&&(a+="tree"===S?s.buildFilterTemplate.call(t,"group_"+r,"",b,F,i):t.set.splitSizes+b+o),C>y&&null!==y&&(t.set.hideAncestor!==!1?v.closest("."+t.set.hideAncestor).addClass("too-many-options"):v.addClass("too-many-options")),void 0!==i.wrapperGroup&&(a=i.wrapperGroup+a+"</"+i.wrapperGroup.match(/<([a-z]+)/)[1]+">"),"fakeSelect"===r&&(t.set.repeatStartFakeSelect&&(b=s.buildFilterTemplate.call(t,"start_"+r,"",T,h,i)),a='<div class="filterControls-value fake-select"><span class="title" data-orig-text="'+h+'">'+h+'</span><ul class="ul-clean fake-select-list">'+b+a+"</ul></div>"),("select"===r||"multiSelect"===r)&&(a='<select name="'+g+'" class="filterControls-value"'+("multiSelect"===r?' multiple="multiple"':"")+'><option value="0">'+h+"</option>"+a+"</select>"),v.append(a)}t.removeClass("ysFilter--loading ysFilter--filtered").addClass("ysFilter--loaded"),void 0!==t.set.afterFilterRendered&&t.set.afterFilterRendered()},buildFilterTemplate:function(e,t,s,l,a){var r=this,i={desc:l},n="",o="",d="",c="",p="",f="",u="",g=!1;for(var h in a)switch(h){case"classNames":n=a[h].join(" ");break;case"background":g=a[h];break;case"attrs":c=" "+a[h].replace("{desc}",l[0]);break;case"wrapper":o=a[h],d="</"+a[h].match(/<([a-z]+)/)[1]+">"}return"object"==typeof l&&(i.desc=l[0],g&&(p=l[1]&&"http"===l[1].substr(0,4)?"background-image: url('"+l[1]+"')":"#"===l[1].substr(0,1)?"background-color: "+l[1]:"background-color: #"+l[1])),void 0!==r.set.eachFilterAttrs&&(i=r.set.eachFilterAttrs(i)),f=g?' style="'+p+'"':"",u=g?"":i.desc,t=t.replace(/\W/g,"-"),"a"===e?o+'<a id="'+t+'" class="'+n+' filterControls-value" href="#"'+f+" data-value='"+s+"'"+c+">"+u+"</a>"+d:"select"===e||"multiSelect"===e?'<option id="'+t+'" value="'+s+'">'+i.desc+"</option>":"fakeSelect"===e?'<li class="'+n+'"'+c+'><a id="'+t+'" class="filterControls-value" href="#"'+f+" data-value='"+s+"'>"+u+"</a></li>":"radio"===e?o+'<input id="'+t+'" type="radio" class="'+n+' filterControls-value" value="'+s+'" /><label'+f+' for="'+t+'">'+u+"</label>"+d:"checkbox"===e?o+'<input id="'+t+'" type="checkbox" class="'+n+' filterControls-value" value="'+s+'" /><label'+f+' for="'+t+'">'+u+"</label>"+d:"group_select"===e?'<optgroup label="'+i.desc+'">'+s+"</optgroup>":"start_fakeSelect"===e?'<li class="'+n+'"'+c+'><a class="js-remove" href="#">'+i.desc+"</a></li>":""},enableEvents:function(){var l=this;l.on("change","."+l.set.groupClass+" select.filterControls-value",function(t){t.preventDefault();var a=e(this).closest("."+l.set.groupClass).data("type"),r=e(this).closest("."+l.set.groupClass).attr("id"),i=e(this).val();"sort"!==r&&(l.set.latestCat=r),s.updateFilterObj.apply(l,[a,r,i])}),l.on("click","."+l.set.groupClass+" a.filterControls-value",function(t){t.preventDefault();var a=e(this).closest("."+l.set.groupClass).data("type"),r=e(this).closest("."+l.set.groupClass).attr("id"),i=e(this).data("value");"s"!==a&&"s1"!==a?l.set.latestCat=r:e(this).hasClass("selected")||e(this).closest("."+l.set.groupClass).find(".filterControls-value").removeClass(l.set.selectedClass),e(this).hasClass(l.set.disabledClass)||e(this).parent().hasClass(l.set.disabledClass)||(e(this).toggleClass(l.set.selectedClass),s.updateFilterObj.apply(l,[a,r,i]))}),l.on("click",".js-remove",function(t){t.preventDefault();var a,r,i,n=e(this).closest("."+l.set.groupClass);0===n.length&&(n=e(this).siblings("."+l.set.groupClass)),a=n.data("type"),r=n.attr("id"),i="remove",n.find("."+l.set.selectedClass).removeClass(l.set.selectedClass),n.find("select").find("option").removeAttr("disabled").filter(":selected").removeAttr("selected"),s.updateFilterObj.apply(l,[a,r,i])}),l.on("click",".js-removeAll",function(a){a.preventDefault();var r=e(t).scrollTop();l.set.filteredBy={},l.set.filteredBy.page=1,l.set.currentHash="",t.location.hash=l.set.currentHash,e(t).scrollTop(r),l.find("."+l.set.groupClass+" ."+l.set.selectedClass).removeClass(l.set.selectedClass),l.find("."+l.set.groupClass+" option").removeAttr("disabled").filter(":selected").removeAttr("selected"),void 0!==l.set.onFilterChanged&&l.set.onFilterChanged(),s.gatherItems.apply(l)}),l.on("click","."+l.set.paging.nextBtnClass,function(e){return e.preventDefault(),l.set.filteredBy.page<l.set.pages&&(l.set.filteredBy.page+=1,l.set.currentHash=s.hashify(l.set.filteredBy),l.set.currentHash.length>0&&(t.location.hash=l.set.currentHash),l.find("."+l.set.pageCurrentClass).text(l.set.filteredBy.page),s.gatherItems.apply(l)),!1}),l.on("click","."+l.set.paging.prevBtnClass,function(e){e.preventDefault(),l.set.filteredBy.page>1&&(l.set.filteredBy.page-=1,l.set.currentHash=s.hashify(l.set.filteredBy),l.set.currentHash.length>0&&(t.location.hash=l.set.currentHash),l.find("."+l.set.pageCurrentClass).text(l.set.filteredBy.page),s.gatherItems.apply(l))}),l.on("click","."+l.set.paging.allBtnClass,function(t){t.preventDefault();var a=e(this).closest("."+l.set.paging.contClass);a.hasClass("viewing-all")?(l.set.limit=l.set.oldLimit,a.removeClass("viewing-all"),l.find("."+l.set.pageCurrentClass).text(l.set.filteredBy.page)):(l.set.oldLimit=l.set.limit,l.set.limit="none",a.addClass("viewing-all"),l.find("."+l.set.pageCurrentClass).text(1)),s.gatherItems.apply(l)})},reSelectLatestFilter:function(){var e=this;for(var t in e.set.filteredBy)if("page"!==t&&"sort"!==t){e.set.latestCat=t,e.set.resetLatestCat=!0;break}},updateFilterObj:function(l,a,r){var i=this,n=null,o=null,d=0;"s1"===l||"s"===l?(n=void 0!==i.set.filteredBy[a]?"object"==typeof i.set.filteredBy[a].value?i.set.filteredBy[a].value.join(","):i.set.filteredBy[a].value:"",n===r||0===r||"0"===r||"remove"===r?(delete i.set.filteredBy[a],s.reSelectLatestFilter.apply(i)):i.set.filteredBy[a]={type:l,value:r}):("sand"===l||"sor"===l)&&("remove"===r?void 0!==i.set.filteredBy[a]&&(delete i.set.filteredBy[a],s.reSelectLatestFilter.apply(i)):null===r?(delete i.set.filteredBy[a],s.reSelectLatestFilter.apply(i)):"object"==typeof r?r.length>0&&(i.set.filteredBy[a]={type:l,value:r}):(n=void 0!==i.set.filteredBy[a]&&void 0!==i.set.filteredBy[a].value?i.set.filteredBy[a].value:[],o=e.inArray(r,n),-1!==o||0===r||"0"===r?n.splice(o,1):n.push(r),n.length>0?i.set.filteredBy[a]={type:l,value:n}:(delete i.set.filteredBy[a],s.reSelectLatestFilter.apply(i)))),i.set.debug===!0&&console.log("var $this.set.filteredBy",i.set.filteredBy),i.set.filteredBy.page=1,i.set.currentHash=s.hashify(i.set.filteredBy),""===i.set.currentHash&&(d=e(t).scrollTop()),t.location.hash=i.set.currentHash,""===i.set.currentHash&&e(t).scrollTop(d),s.gatherItems.apply(i),void 0!==i.set.onFilterChanged&&i.set.onFilterChanged(),i.set.updateWHash!==!1&&e("."+i.set.updateWHash).each(function(){var t=e(this).attr("href");e(this).attr("href",t+"#"+i.set.currentHash)})},reSelect:function(){var e=this,t=e.set.filteredBy,s={},l={},a="",r="";for(var i in t)if(s=e.find("#"+i),a=t[i].value,r=s.data("create"),0!==s.length)if("sort"===i&&(a=t[i].value.join("-")),"object"==typeof t[i].value&&"sort"!==i)for(var n=0;n<t[i].value.length;n++)a=t[i].value[n].replace(/\W/g,"-"),"select"===r||"multiSelect"===r?s.find("#"+i+"-"+a).attr("selected",!0):"fakeSelect"===r?s.find("#"+i+"-"+a).closest("li").addClass(e.set.selectedClass):s.find("#"+i+"-"+a).addClass(e.set.selectedClass);else l=s.find("#"+i+"-"+a.replace(/\W/g,"-")),"select"===r||"multiSelect"===r?l.attr("selected",!0):"fakeSelect"===r?(l.addClass("selected"),s.find(".fake-select").addClass("selected").find("span").text(l.text())):l.addClass(e.set.selectedClass);void 0!==e.set.onFilterChanged&&e.set.onFilterChanged()},gatherItems:function(){var e=this,t=/_\d$/,l=e.set.filteredBy,a=e.set.relevantFilters||e.filter.filter,r=0,i=0,n=[],o=[],d=[],c=[],p=function(s,l){var r=[],i=0,n=parseInt(s.slice(-1),10)-1,o=s.replace(t,""),d=l===e.set.undefinedCatId?void 0:l;for(var c in a[o])0===c.indexOf(e.set.category)&&d===c.split("/")[n]&&(r[i]=a[o][c],i++);return Array.prototype.concat.apply([],r)};for(var f in l)if("page"!==f&&"sort"!==f){if("s1"===l[f].type)o=t.test(f)?p(f,l[f].value):a[f][l[f].value];else if("sor"===l[f].type){for(c=l[f].value.slice(0),c.reverse(),i=0;i<c.length;i++)n[i]=t.test(f)?p(f,c[i]):a[f][c[i]];o=Array.prototype.concat.apply([],n)}else if("sand"===l[f].type)for(i=0;i<l[f].value.length;i++)n[i]=a[f][l[f].value[i]],o=o;d=0===r?o:s.intersect(d,o),n=[],r++}s.updateFilterHTML.apply(e,[r,d,a])},updateFilterHTML:function(t,l,a){var r,n,o,d,c,p,f,u,g,h,v=this,m=v.filter.settings.filter,y={},C={};if(0===t)for(v.set.currentItems=v.set.initItems.slice(0),v.find("."+v.set.groupClass).find("."+v.set.disabledClass+", ."+v.set.selectedClass).removeClass(v.set.disabledClass+" "+v.set.selectedClass),v.find("."+v.set.groupClass+" option").removeAttr("disabled").filter(":selected").removeAttr("selected"),i=0;i<m.length;i++)y=v.find("#"+m[i][0]),c=y.data("max-length")||null,null!==c&&Object.keys(a[m[i][0]]).length>c&&(v.set.hideAncestor!==!1?y.closest("."+v.set.hideAncestor).addClass("too-many-options"):y.addClass("too-many-options"));else{for(i=0;i<m.length;i++)if(v.set.latestCat!==m[i][0]){if(r=0,n=m[i][0].replace(/_\d$/,""),o=0,y=v.find("#"+m[i][0]),d=y.data("create")||null,c=y.data("max-length")||null,p="",f={},u=a[n],g=y.data("depth")-1||null,intersected=[],null!==g){for(h in a[n]){var b=[],I=h.split("/");void 0!==I[g]&&(S=I[g],b=void 0===f[S]?[]:f[S],f[S]=Array.prototype.concat.apply(b,a[n][h]))}u=f}for(h in u){var S=h.replace(/\W/g,"-");intersected=s.intersect(l,u[h]),C=v.find("#"+m[i][0]+"-"+S),0!==C.length&&(p=C.prop("tagName").toLowerCase(),intersected.length>0?("option"===p||"input"===p?C.removeAttr("disabled"):"fakeSelect"===d?C.closest("li").removeClass(v.set.disabledClass).attr("title",intersected.length):C.removeClass(v.set.disabledClass).attr("title",intersected.length),o+=intersected.length,r++):"option"===p||"input"===p?C.attr("disabled",!0):"fakeSelect"===d?C.closest("li").addClass(v.set.disabledClass).removeAttr("title"):C.addClass(v.set.disabledClass).removeAttr("title"))}null!==c&&(r>c?v.set.hideAncestor!==!1?y.closest("."+v.set.hideAncestor).addClass("too-many-options"):y.addClass("too-many-options"):v.set.hideAncestor!==!1?y.closest("."+v.set.hideAncestor).removeClass("too-many-options"):y.removeClass("too-many-options")),r>0?y.removeClass(v.set.disabledClass).attr("title",o):y.addClass(v.set.disabledClass).removeAttr("title")}else v.set.resetLatestCat&&(e("#"+v.set.latestCat).find("."+v.set.disabledClass).removeClass(v.set.disabledClass),e("#"+v.set.latestCat).find("option").removeAttr("disabled"),v.set.resetLatestCat=!1);l=s.unique(l),v.set.currentItems=void 0!==v.filter.related?s.relatedToItems.apply(v,[l]):s.keysToItems.apply(v,[l])}s.sortOrRenderItems.apply(v)},sortOrRenderItems:function(){var e=this;void 0!==e.set.filteredBy.sort&&e.set.currentItems.length>0?s.sortItems.apply(e):e.set.preSort!==!1?s.sortItems.apply(e,[e.set.preSort[0],e.set.preSort[1]]):s.renderItems.apply(e)},sortItems:function(e,t){var l=this,a=l.set.currentItems,r=a.length,i=e||l.set.filteredBy.sort.value[0],n=e&&t?e+"-"+t:l.set.filteredBy.sort.value.join("-"),o=t||l.set.filteredBy.sort.value[1],d=0,c=0,p=0,f=[],u={};for(d=0;r>d;d++)f[d]={obj:a[d]},void 0!==l.filter.related&&a[d].relatedShowMain===!1?(related=s.keysToItems.apply(l,[a[d].relatedShowVariants]),u=related[0]):u=a[d],"price"===i?(p=parseFloat(u.price.priceAsNumber,10),u.price.soldout&&(p="dsc"===o?0:999999999),f[d][i]=p):f[d][i]="news"===i?u.price.newProduct?0:10:u[i],c++;for($item=l.find("#sort-"+n),"fakeSelect"===l.find("#sort").data("create")?$item.closest("li").addClass(l.set.selectedClass):$item.addClass(l.set.selectedClass),f.sort("number"==typeof f[0][i]?function(e,t){return e[i]-t[i]}:function(e,t){return e[i]<t[i]||""===t[i]?-1:e[i]>t[i]?1:0}),"dsc"===o&&f.reverse(),l.set.currentItems=[],d=0;r>d;d++)l.set.currentItems[d]=f[d].obj;console.log("var $this.set.currentItems",l.set.currentItems),s.renderItems.apply(l)},renderItems:function(){var t=this,l=t.set.currentItems,a=l.length,r=null,i=0,n="";t.set.initialLoad?t.set.appendItems&&(i=0,r=t.set.limit*t.set.filteredBy.page,a=r>a?a:r,a!==r&&t.find("."+t.set.paging.contClass).addClass(t.set.disabledClass)):"none"!==t.set.limit?a>t.set.limit?(t.set.pages=Math.ceil(a/t.set.limit),t.find("."+t.set.paging.contClass).removeClass(t.set.disabledClass),r=t.set.limit*t.set.filteredBy.page,i=(t.set.filteredBy.page-1)*t.set.limit,a=r>a?a:r,t.set.filteredBy.page>1?t.find("."+t.set.paging.prevBtnClass).closest("."+t.set.paging.contClass).removeClass(t.set.disabledClass):t.find("."+t.set.paging.prevBtnClass).closest("."+t.set.paging.contClass).addClass(t.set.disabledClass),a!==r&&t.find("."+t.set.paging.contClass).addClass(t.set.disabledClass)):(t.set.pages=1,t.find("."+t.set.paging.contClass).addClass(t.set.disabledClass),t.find("."+t.set.paging.prevBtnClass).closest("."+t.set.paging.contClass).addClass(t.set.disabledClass)):t.set.pages=1,t.find("."+t.set.pageTotalClass).text(t.set.pages),t.find("."+t.set.itemTotalClass).text(l.length),t.find("."+t.set.currentTotalClass).text(a);for(var o=i;a>o;o++)t.set.eachItemAttrs&&(l[o]=t.set.eachItemAttrs(t,l[o],o)),t.set.onItemIndex===o&&(n+=t.set.onItem(a)),n+=s.renderItemTemplate.apply(t,[l[o]]);t.set.appendItems&&1!==t.set.pages&&1!==t.set.filteredBy.page&&t.set.initialLoad===!1?t.find("#"+t.set.itemContId).append(n):t.find("#"+t.set.itemContId).html(n),hash=-1===t.set.currentHash.indexOf("#")?"#"+t.set.currentHash:t.set.currentHash,t.find("#"+t.set.itemContId+" a").each(function(){var t=e(this).attr("href");-1!==t.indexOf("#")&&(t=t.substring(0,t.indexOf("#"))),e(this).attr("href",t+hash)}),t.set.initialLoad=!1,void 0!==t.set.afterItemsRendered&&t.set.afterItemsRendered()},renderItemTemplate:function(t){var l=this,a=l.filter.settings.template.item,r=l.filter.settings.template.price,i=l.filter.settings.template.related,n=l.filter.settings.template.attribute,o="",d="",c={},p=[],f={},u=!0;if(void 0!==l.filter.related&&t.relatedShowMain===!1?(p=s.keysToItems.apply(l,[t.relatedShowVariants]),f=e.extend({},p[0])):f=e.extend({},t),void 0!==i){void 0!==t.related&&t.related.length>0&&(p=s.keysToItems.apply(l,[t.related]));for(d in i){"swatch"===d&&null!==t.swatch&&(u=!t.relatedShowMain,o+=s.renderItemReplace.apply(l,[t,i[d],{idPrefix:t.id+"_",relatedHide:u}]));for(var g=0;g<p.length;g++)if(void 0!==p[g]){if(u=!0,void 0!==l.filter.related)for(var h=0;h<t.relatedShowVariants.length;h++)if(t.relatedShowVariants[h]===p[g].id){u=!1;break}void 0!==r&&-1!==i[d].indexOf("{price}")&&"object"==typeof p[g].price&&(p[g].price=s.renderItemPrice.apply(l,[p[g],r])),o+=s.renderItemReplace.apply(l,[p[g],i[d],{idPrefix:t.id+"_",relatedHide:u}])}""!==o&&(f["related_"+d]=o),o=""}}if(void 0!==n)for(d in n){o="";for(var v in f[d])c=e.extend({},f),c[d]=f[d][v],o+=s.renderItemReplace.apply(l,[c,n[d],{}]);f["attribute_"+d]=o}return void 0!==r&&"object"==typeof f.price&&(f.price=s.renderItemPrice.apply(l,[f,r])),a=s.renderItemReplace.apply(l,[f,a,{finalReplace:!0}])},renderItemPrice:function(e,t){var s=this,l="";return"object"==typeof e.price&&e.price.soldout&&t.soldout?l=t.soldout:(l="object"==typeof e.price&&e.price.showAsOnSale&&t.discounted?t.discounted:"object"==typeof e.price&&e.price.newProduct&&t.news?t.news:t.default,e.classProductNew=e.price.newProduct===!0?" "+s.set.classProductNew:"",e.classProductSale=e.price.showAsOnSale===!0?" "+s.set.classProductSale:""),l=l.replace(/\{(.+?)\}/g,function(t,s){return e.price[s]})},renderItemReplace:function(e,l,a){var r=this,i=!1,n=a.finalReplace||!1;return e.image="object"==typeof e.image?e.image:[e.image],e.hash=-1===r.set.currentHash.indexOf("#")?"#"+r.set.currentHash:r.set.currentHash,e.root=encodeURIComponent(t.location.origin),e.locale=s.getLocale(),e.category=r.set.category,l=l.replace(/\{(.+?)\}/g,function(t,l){var o,d="",c="",p="",f=[];if("image_"===l.substring(0,6)){if(o=parseInt(l.substring(6))-1,d=e.image[o],void 0===d||null===d)return i=!0,"{#}"}else if("attribute_"!==l.substring(0,10)||n)if(-1!==l.indexOf("|"))switch(l=l.split("|"),l[1]){case"title":d=void 0!==e[l[0]]?s.titleCase(e[l[0]]):""}else d="relatedHide"===l&&void 0!==a.relatedHide?a.relatedHide?r.set.disabledClass:"":"id"===l&&void 0!==a.idPrefix?a.idPrefix+e[l]:void 0!==e[l]?e[l]:"";else f=l.split("_"),c=f[1],p=f.length>2?f[2]:"",null!==e[c]&&"object"==typeof e[c]&&void 0!==e[c].desc&&(d=s.hexOrImage(e[c],p));return d}),i&&(l=l.replace(/<[^<]*\{#\}[^>]*>/g,"")),l},hexOrImage:function(e,t){var s="";return void 0!==e.image&&void 0!==e.image.url?s="style"===t?"background-image: url("+e.image.url+");":e.image.url:void 0!==e.hex&&(s="background-color: "+(0===e.hex.indexOf("#")?e.hex:"#"+e.hex)+";"),s},relatedToItems:function(e){for(var t=this,s={},l=[],a="",r=[],i=0,n=0;n<e.length;n++)-1!==e[n].indexOf("_")?(r=e[n].split("_"),void 0===s[r[0]]?s[r[0]]={relatedShowMain:!1,relatedShowVariants:[r[1]]}:s[r[0]].relatedShowVariants.push(r[1])):(void 0===s[e[n]]&&(s[e[n]]={}),s[e[n]].relatedShowMain=!0,void 0===s[e[n]].relatedShowVariants&&(s[e[n]].relatedShowVariants=[]));for(var o in s)a=t.filter.productIds[o],l[i]=t.filter.products[a],l[i].relatedShowMain=s[o].relatedShowMain,l[i].relatedShowVariants=s[o].relatedShowVariants,i++;return l},keysToItems:function(e){for(var t=this,s=[],l="",a=0;a<e.length;a++)l=t.filter.productIds[e[a]],s[a]=t.filter.products[l];return s},unique:function(e){var t=[];e:for(var s=0;s<e.length;s++){for(var l=0;l<t.length;l++)if(t[l]==e[s])continue e;t[t.length]=e[s]}return t},intersect:function(e,t){var s=[],l={},a=0;for(a=0;a<e.length;a++)l[e[a]]=!0;for(a=0;a<t.length;a++)l[t[a]]&&(s[s.length]=t[a]);return s},dehashify:function(e){var t=this,s={},l=e.substring(1).split("&"),a=[],r="",i=!0,n=[];if(e.length>1&&1!==e.indexOf("/"))for(var o=0;o<l.length;o++)if(a=l[o].split("="),"page"===a[0])s.page=parseInt(a[1]);else{switch(r=a[0].split("~"),r[1]){case"sand":n=a[1].split("+");break;case"sor":case"r":case"s":case"f":n=a[1].split(",");break;default:n=a[1]}i&&"sort"!==r[0]&&(i=!1,t.set.latestCat=r[0]),s[r[0]]={type:r[1],value:n}}return void 0===s.page&&(s.page=1),s},hashify:function(e){var t="",s=null;for(var l in e)if("page"===l)e[l]>1&&(t+=l+"="+e[l]+"&");else{switch(e[l].type){case"sand":s=e[l].value.join("+");break;case"sor":case"s":case"r":case"f":s=e[l].value.join(",");break;default:s=e[l].value}t+=l+"~"+e[l].type+"="+s+"&"}return t=t.substring(0,t.length-1),t.length?t:""},titleCase:function(e){return e.toLowerCase().replace(/^\S|\s\S/g,function(e){return e.toUpperCase()})},getLocale:function(){var e=t.location.pathname.split("/")[1];return/\w/.test(e)?"/"+e:""},urlify:function(e){return e.toLowerCase().replace(/\s{2,}|\s/g,"-")}},l={init:function(l){var i=e.extend({},a,l);return t.requestAnimFrame=function(){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(e){t.setTimeout(e,1e3/60)}}(),this.each(function(){var t=e(this),l=t.data();t.set=e.extend({},i,l,r),t.set.debug===!0&&(console.warn(":::: YS Filter Debug has been set to true ::::"),console.log("Options -> ",t.set),void 0===t.set.url&&console.warn("No url has been defined i.e. loadproducts")),s.init.apply(t),t.data(t.set)})}},a={limit:20,preSort:!1,splitSizes:!1,appendItems:!1,multipleImgs:!1,filterOptions:{},paging:{contClass:"filterPaging",nextBtnClass:"filterPaging-next",prevBtnClass:"filterPaging-prev",allBtnClass:"filterPaging-all"},updateWHash:!1,hideAncestor:!1,repeatStartFakeSelect:!1,undefinedCat:"Unsorted",undefinedCatId:"unsorted",itemContId:"filterItems",selectedClass:"u-selected",disabledClass:"u-disabled",groupClass:"filterControls-group",classProductNew:"product--new",classProductSale:"product--sale",pageTotalClass:"js-pages-total",pageCurrentClass:"js-pages-current",itemTotalClass:"js-items-total",currentTotalClass:"js-items-current"},r={filteredBy:{page:1},currentHash:"",latestCat:"",resetLatestCat:!1,currentItems:[],oldLimit:null,relevantFilters:null,initialLoad:!1,pages:1};e.fn.ysFilter=function(t){return l[t]?l[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist on jQuery.ysFilter"):l.init.apply(this,arguments)}}(jQuery,window);