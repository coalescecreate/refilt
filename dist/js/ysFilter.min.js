/**
 * ys-filter - For filtering and sorting products returned from Silk API.
 * @version v1.11.0
 * @link http://youngskilled.com
 * @author richard@youngskilled.com Young/Skilled
 * @license MIT
 */
!function(e,t){var s={init:function(){var a=this;a.set.debug===!0&&(0===a.find("."+a.set.groupClass).length&&console.log("no element with groupClass (."+a.set.groupClass+") found"),0===a.find("#"+a.set.itemContId).length&&console.log("no items container with itemContId (#"+a.set.itemContId+") found")),a.addClass("ysFilter--loading ysFilter--init"),a.set.currentHash=t.location.hash,a.set.filterOptions.paging&&(a.set.paging=a.set.filterOptions.paging),"#"===a.set.currentHash||""===a.set.currentHash?a.set.currentHash="":(a.addClass("ysFilter--filtered"),a.set.updateWHash!==!1&&e("."+a.set.updateWHash).each(function(){var t=e(this).attr("href");e(this).attr("href",t+a.set.currentHash)})),e.ajax({url:a.set.url,type:"GET",cache:!0,dataType:"JSON",success:function(l){a.filter=l,a.set.debug===!0&&console.log("var $this.filter",e.extend({},a.filter)),s.preFilter.apply(a),s.buildFilter.apply(a),s.enableEvents.apply(a),a.filter.settings.limit>0&&(a.set.limit=a.filter.settings.limit),a.set.pages=Math.ceil(a.set.initItems.length/a.set.limit),s.updateFilterObjFromHash({data:{"this":a,init:!0}}),e(t).on("hashchange",{"this":a,init:!1},s.updateFilterObjFromHash)}})},preFilter:function(){var t=this,a=[],l=[],r=[],i=0,n=null,o=null,d=null,c="",p="",u=!1,f=!1;if(t.set.initItems=e.extend(!0,[],t.filter.products),void 0!==t.set.category&&"/"!==t.set.category){if(0===t.set.category.indexOf("/")&&(t.set.category=t.set.category.slice(1)),n=t.filter.filter.categories,products=t.filter.products,o=t.filter.settings.filter,d=t.filter.filter,u=t.set.category===t.set.newsURI,f=t.set.category===t.set.saleURI,u||f)for(i=0;i<products.length;i++)u&&products[i].price.newProduct&&(l[l.length]=products[i].id),f&&products[i].price.showAsOnSale&&(l[l.length]=products[i].id);else{var h="^"+t.set.category+"$";for(var g in n){t.set.alsoMatchChildrenCategories&&(h="^"+t.set.category);var v=new RegExp(h);v.test(g)&&(l[i]=n[g],i++)}}for(a=Array.prototype.concat.apply([],l),t.set.relevantFilters={},i=0;i<o.length;i++){p=o[i][0].replace(/_\d/,""),c=d[p];for(var m in c)l=[],r=[],l=s.intersect(a,c[m]),l.length>0&&(void 0===t.set.relevantFilters[p]&&(t.set.relevantFilters[p]={}),t.set.relevantFilters[p][m]=l)}a=s.unique(a),t.set.initItems=void 0!==t.filter.related?s.relatedToItems.apply(t,[a,!0]):s.keysToItems.apply(t,[a])}t.set.initItemsStr=JSON.stringify(t.set.initItems),t.set.currentItems=t.set.initItems.slice(0)},buildFilter:function(){var t=this,a=t.find("."+t.set.groupClass),l="",r="",i={},n="",o=t.filter.settings.filter.length,d=t.set.splitSizes!==!1?"</"+t.set.splitSizes.match(/<([a-z]+)/)[1]+">":"";if(void 0!==t.filter.settings.sort){var c=e("#sort"),p=void 0!==t.filter.settings.sort.init?t.filter.settings.sort.init:"";r=c.data("create"),i=t.set.filterOptions.sort||{};for(var u in t.filter.settings.sort)"init"!==u&&(t.filter.settings.sort[u].asc&&(l+=s.buildFilterTemplate.call(t,r,"sort-"+u+"-asc",'["'+u+'","asc"]',t.filter.settings.sort[u].asc,i)),t.filter.settings.sort[u].dsc&&(l+=s.buildFilterTemplate.call(t,r,"sort-"+u+"-dsc",'["'+u+'","dsc"]',t.filter.settings.sort[u].dsc,i)));void 0!==i.wrapperGroup&&(l=i.wrapperGroup+l+"</"+i.wrapperGroup.match(/<([a-z]+)/)[1]+">"),"fakeSelect"===r&&(t.set.repeatStartFakeSelect&&(l=s.buildFilterTemplate.call(t,"start_"+r,"","",p,i)+l),n=void 0!==i.parentClassNames?" "+i.parentClassNames.join(" "):"",l='<div class="filterControls-value fake-select'+n+'"><span class="title" data-orig-text="'+p+'">'+p+'</span><ul class="ul-clean fake-select-list">'+l+"</ul></div>"),("select"===r||"multiSelect"===r)&&(l='<select class="filterControls-value"'+("multiSelect"===r?' multiple="multiple"':"")+'><option value="0">'+p+"</option>"+l+"</select>"),c.append(l)}for(var f=0;o>f;f++){var h=t.filter.settings.filter[f][0],g=h.replace(/_\d/,""),v=t.filter.settings.filter[f][1],m=a.filter("#"+h),C=t.set.relevantFilters||t.filter.filter,y={},b=(m.data("type"),m.data("max-length")||null),I=0,F="",S="",w=null,B=null,x=null,k="",T=[],j=[],A={};l="",r=m.data("create"),i=t.set.filterOptions[h]||{},t.set.sortFiltersAlphabetically&&"categories"!==g&&void 0!==C[g]?Object.keys(C[g]).sort(function(e,t){return t>e||""===t?-1:e>t?1:0}).forEach(function(e){void 0===y[g]&&(y[g]=[]),y[g][e]=C[g][e]}):y=C;for(var H in y[g]){if(S=H,void 0!==t.filter.filterDescriptions[g]&&void 0!==t.filter.filterDescriptions[g][H]&&(S=t.filter.filterDescriptions[g][H]),"object"!=typeof S&&-1!==S.indexOf("::")||"categories"===g){if(0!==H.indexOf(t.set.category))continue;if(T=S.split("::"),j=H.split("/"),void 0!==m.data("depth")){if(x=m.data("depth")-1,void 0===T[x])continue;k=j[x],S=T[x],void 0===A[k]&&(l+=s.buildFilterTemplate.call(t,r,h+"-"+k,k,S,i),A[k]=!0)}else S=T.pop(),w="tree",B!==T.join("")&&(null!==B&&(l+=s.buildFilterTemplate.call(t,"group_"+r,"",F,B,i),F=""),B=T.join("")),F+=s.buildFilterTemplate.call(t,r,g+"-"+H,H,S,i)}else t.set.splitSizes!==!1&&"size"===g?(w="size",sizeTables=H.split("_"),B!==sizeTables[0]&&(null!==B&&(l+=t.set.splitSizes+F+d,F=""),B=sizeTables[0]),F+=s.buildFilterTemplate.call(t,r,g+"-"+H,H,S,i)):l+=s.buildFilterTemplate.call(t,r,g+"-"+H,H,S,i);I++}null!==B&&(l+="tree"===w?s.buildFilterTemplate.call(t,"group_"+r,"",F,B,i):t.set.splitSizes+F+d),I>b&&null!==b&&(t.set.hideAncestor!==!1?m.closest("."+t.set.hideAncestor).addClass("too-many-options"):m.addClass("too-many-options")),void 0!==i.wrapperGroup&&(l=i.wrapperGroup+l+"</"+i.wrapperGroup.match(/<([a-z]+)/)[1]+">"),"fakeSelect"===r&&(t.set.repeatStartFakeSelect&&(F=s.buildFilterTemplate.call(t,"start_"+r,"",H,v,i)),n=void 0!==i.parentClassNames?" "+i.parentClassNames.join(" "):"",l='<div class="filterControls-value fake-select'+n+'"><span class="title" data-orig-text="'+v+'">'+v+'</span><ul class="ul-clean fake-select-list">'+F+l+"</ul></div>"),("select"===r||"multiSelect"===r)&&(l='<select name="'+g+'" class="filterControls-value"'+("multiSelect"===r?' multiple="multiple"':"")+'><option value="0">'+v+"</option>"+l+"</select>"),m.append(l)}t.removeClass("ysFilter--loading ysFilter--filtered").addClass("ysFilter--loaded"),void 0!==t.set.afterFilterRendered&&t.set.afterFilterRendered()},buildFilterTemplate:function(e,t,a,l,r){var i=this,n={desc:l},o="",d="",c="",p="",u="",f="",h=!1;for(var g in r)switch(g){case"classNames":o=r[g].join(" ");break;case"background":h=r[g];break;case"attrs":p=" "+r[g].replace("{desc}",l[0]);break;case"wrapper":d=r[g],c="</"+r[g].match(/<([a-z]+)/)[1]+">"}return"object"==typeof l&&(n.desc=l.desc),void 0!==i.set.eachFilterAttrs&&(n=i.set.eachFilterAttrs(n)),f=h?' title="'+n.desc+'"':"",u=h?s.hexOrImage(l,"style",i.set.forceHex):n.desc,t=t.replace(/\W/g,"-"),"a"===e?d+'<a id="'+t+'" class="'+o+' filterControls-value"'+f+' href="#" data-value=\''+a+"'"+p+">"+u+"</a>"+c:"select"===e||"multiSelect"===e?'<option id="'+t+'" value="'+a+'">'+n.desc+"</option>":"fakeSelect"===e?"<li "+p+f+'><a id="'+t+'" class="'+o+' filterControls-value"'+f+' href="#" data-value=\''+a+"'>"+u+"</a></li>":"radio"===e?d+'<input id="'+t+'" type="radio" class="'+o+' filterControls-value" value="'+a+'" /><label'+f+' for="'+t+'">'+u+"</label>"+c:"checkbox"===e?d+'<input id="'+t+'" type="checkbox" class="'+o+' filterControls-value" value="'+a+'" /><label'+f+' for="'+t+'">'+u+"</label>"+c:"group_select"===e?'<optgroup label="'+n.desc+'">'+a+"</optgroup>":"start_fakeSelect"===e?'<li class="'+o+'"'+p+'><a class="js-remove" href="#">'+n.desc+"</a></li>":""},enableEvents:function(){var a=this,l=null,r={move:!1};l=function(){return r.moved?!1:Math.abs(Math.abs(r.startX)-Math.abs(r.endX))<50&&Math.abs(Math.abs(r.startY)-Math.abs(r.endY))<50},e(t).on({touchstart:function(e){a.set.touch=!0,r.startX=e.originalEvent.targetTouches[0].clientX,r.startY=e.originalEvent.targetTouches[0].clientY,r.endX=e.originalEvent.targetTouches[0].clientX,r.endY=e.originalEvent.targetTouches[0].clientY,r.moved=!1},touchmove:function(e){r.endX=e.originalEvent.targetTouches[0].clientX,r.endY=e.originalEvent.targetTouches[0].clientY,l()||(r.moved=!0)}}),a.on("change","."+a.set.groupClass+" select.filterControls-value",function(t){t.preventDefault();var l=e(this).closest("."+a.set.groupClass).data("type"),r=e(this).closest("."+a.set.groupClass).attr("id"),i=e(this).val();"sort"!==r&&(a.set.latestCat=r),s.updateFilterObj.apply(a,[l,r,i])}),a.on("click touchend","."+a.set.groupClass+" a.filterControls-value",function(t){if(t.preventDefault(),a.set.touch!==!0||l()!==!1){var r=e(this).closest("."+a.set.groupClass).data("type"),i=e(this).closest("."+a.set.groupClass).attr("id"),n=e(this).data("value");"s"!==r&&"s1"!==r?a.set.latestCat=i:e(this).hasClass("selected")||e(this).closest("."+a.set.groupClass).find(".filterControls-value").removeClass(a.set.selectedClass),e(this).hasClass(a.set.disabledClass)||e(this).parent().hasClass(a.set.disabledClass)||(e(this).toggleClass(a.set.selectedClass),s.updateFilterObj.apply(a,[r,i,n]))}}),a.on("click touchend",".js-removeElement",function(t){if(t.preventDefault(),a.set.touch!==!0||l()!==!1){var r=e(this).find("a").data();type=r.type,cat=r.cat,val=r.value,"fakeSelect"===e("#"+cat).data("create")&&e("#"+cat+"-"+val).parent().trigger("click"),s.updateFilterObj.apply(a,[type,cat,val])}}),a.on("click touchend",".js-remove",function(t){if(t.preventDefault(),a.set.touch!==!0||l()!==!1){var r,i,n,o=e(this).closest("."+a.set.groupClass);0===o.length&&(o=e(this).siblings("."+a.set.groupClass)),r=o.data("type"),i=o.attr("id"),n="remove",o.find("."+a.set.selectedClass).removeClass(a.set.selectedClass),o.find("select").find("option").removeAttr("disabled").filter(":selected").removeAttr("selected"),s.updateFilterObj.apply(a,[r,i,n])}}),a.on("click touchend",".js-removeAll",function(r){if(r.preventDefault(),a.set.touch!==!0||l()!==!1){var i=e(t).scrollTop();a.set.filteredBy={},a.set.filteredBy.page=1,a.set.currentHash="",a.set.outputChosenFiltersId!==!1&&e("#"+a.set.outputChosenFiltersId).find("#js-ysFilterElements").remove(),t.location.hash=a.set.currentHash,e(t).scrollTop(i),a.find("."+a.set.groupClass).each(function(){"fakeSelect"===e(this).data("create")&&e(this).find(".fake-select").trigger("rekaf.resetSelect")}),a.find("."+a.set.groupClass+" ."+a.set.selectedClass).removeClass(a.set.selectedClass),a.find("."+a.set.groupClass+" option").removeAttr("disabled").filter(":selected").removeAttr("selected"),void 0!==a.set.onFilterChanged&&a.set.onFilterChanged(a.set.filteredBy),s.gatherItems.apply(a)}}),a.on("click touchend","."+a.set.paging.nextBtnClass,function(e){return e.preventDefault(),a.set.touch!==!0||l()!==!1?(a.set.filteredBy.page<a.set.pages&&(a.set.filteredBy.page+=1,a.set.currentHash=s.hashify(a.set.filteredBy),a.set.currentHash.length>0&&(t.location.hash=a.set.currentHash),a.find("."+a.set.pageCurrentClass).text(a.set.filteredBy.page),s.gatherItems.apply(a)),!1):void 0}),a.on("click touchend","."+a.set.paging.prevBtnClass,function(r){if(r.preventDefault(),a.set.touch!==!0||l()!==!1){var i=e(t).scrollTop();a.set.filteredBy.page>1&&(a.set.filteredBy.page-=1,a.set.currentHash=s.hashify(a.set.filteredBy),t.location.hash=a.set.currentHash,e(t).scrollTop(i),a.find("."+a.set.pageCurrentClass).text(a.set.filteredBy.page),s.gatherItems.apply(a))}}),a.on("click touchend","."+a.set.paging.allBtnClass,function(t){if(t.preventDefault(),a.set.touch!==!0||l()!==!1){var r=e(this).closest("."+a.set.paging.contClass);r.hasClass("viewing-all")?(a.set.limit=a.set.oldLimit,r.removeClass("viewing-all"),a.find("."+a.set.pageCurrentClass).text(a.set.filteredBy.page)):(a.set.oldLimit=a.set.limit,a.set.limit="none",r.addClass("viewing-all"),a.find("."+a.set.pageCurrentClass).text(1)),s.gatherItems.apply(a)}})},reSelectLatestFilter:function(){var e=this;for(var t in e.set.filteredBy)if("page"!==t&&"sort"!==t){e.set.latestCat=t,e.set.resetLatestCat=!0;break}},createChosenElements:function(){var t=this,s=t.set.filteredBy,a='<div id="js-ysFilterElements">',l=function(t,s,a){var l=e("#"+t+"-"+s),r=void 0!==l.attr("title")?' title="'+l.attr("title")+'"':"";return l.length>0?"A"===l[0].nodeName?'<span class="js-removeElement"'+r+">"+l.parent().clone().children().removeAttr("id").attr({"data-type":a,"data-cat":t}).parent().html()+"</span>":'<span class="js-removeElement"><a href="#" data-type="'+a+'" data-cat="'+t+'" data-value="'+s+'">'+s+"</a></span>":void 0};for(var r in s)if("page"!==r&&"sort"!==r)if("sor"===s[r].type||"sand"===s[r].type)for(var i=0;i<s[r].value.length;i++)a+=l(r,s[r].value[i],s[r].type);else a+=l(r,s[r].value,s[r].type);a+="</div>",e("#"+t.set.outputChosenFiltersId).find("#js-ysFilterElements").remove(),e("#"+t.set.outputChosenFiltersId).append(a)},updateFilterObjFromHash:function(e){$this=e.data.this,init=e.data.init,$this.set.currentHash=t.location.hash,$this.set.filteredBy=s.dehashify.apply($this,[t.location.hash]),""!==$this.set.currentHash?($this.set.filteredBy.page>1&&($this.find("."+$this.set.paging.prevBtnClass).removeClass("."+$this.set.disabledClass),$this.set.initialLoad=!0),s.gatherItems.apply($this),$this.set.outputChosenFiltersId!==!1&&s.createChosenElements.apply($this),s.reSelect.apply($this)):init?$this.set.preSort!==!1?s.gatherItems.apply($this):$this.set.debug===!0&&s.gatherItems.apply($this):s.gatherItems.apply($this),void 0!==$this.set.onFilterChanged&&$this.set.onFilterChanged($this.set.filteredBy)},updateFilterObj:function(a,l,r){var i=this,n=null,o=null,d=null,c=0;"s1"===a||"s"===a?(n=void 0!==i.set.filteredBy[l]?"object"==typeof i.set.filteredBy[l].value?i.set.filteredBy[l].value.join(","):i.set.filteredBy[l].value:"",n===o||"remove"===o?(delete i.set.filteredBy[l],s.reSelectLatestFilter.apply(i)):i.set.filteredBy[l]={type:a,value:r}):("sand"===a||"sor"===a)&&("remove"===r?void 0!==i.set.filteredBy[l]&&(delete i.set.filteredBy[l],s.reSelectLatestFilter.apply(i)):null===r?(delete i.set.filteredBy[l],s.reSelectLatestFilter.apply(i)):"object"==typeof r?r.length>0&&(i.set.filteredBy[l]={type:a,value:r}):(r+="",n=void 0!==i.set.filteredBy[l]&&void 0!==i.set.filteredBy[l].value?i.set.filteredBy[l].value:[],d=e.inArray(r,n),-1!==d?n.splice(d,1):n.push(r),n.length>0?i.set.filteredBy[l]={type:a,value:n}:(delete i.set.filteredBy[l],s.reSelectLatestFilter.apply(i)))),i.set.debug===!0&&console.log("var $this.set.filteredBy",i.set.filteredBy),i.set.outputChosenFiltersId!==!1&&s.createChosenElements.apply(i),i.set.filteredBy.page=1,i.set.currentHash=s.hashify(i.set.filteredBy),""===i.set.currentHash&&(c=e(t).scrollTop()),t.location.hash=i.set.currentHash,""===i.set.currentHash&&e(t).scrollTop(c),i.set.updateWHash!==!1&&e("."+i.set.updateWHash).each(function(){var t=e(this).attr("href");e(this).attr("href",t+"#"+i.set.currentHash)})},reSelect:function(){var e,t=this,s=t.set.filteredBy,a={},l={},r="",i="",n=t.filter.settings.filter.slice();n.push(["sort"]);for(e in n)e=n[e][0],s[e]||(a=t.find("#"+e),a.find("."+t.set.selectedClass+", option[selected=selected]").removeClass(t.set.selectedClass).removeAttr("selected"));for(e in s)if(a=t.find("#"+e),r=s[e].value,i=a.data("create"),0!==a.length)if("sort"===e&&(r=s[e].value.join("-")),"object"==typeof s[e].value&&"sort"!==e){"select"===i||"multiSelect"===i?a.find("option").removeAttr("selected"):"fakeSelect"===i?a.find("li."+t.set.selectedClass).removeClass(t.set.selectedClass):a.find("."+t.set.selectedClass).removeClass(t.set.selectedClass);for(var o=0;o<s[e].value.length;o++)r=s[e].value[o].replace(/\W/g,"-"),"select"===i||"multiSelect"===i?a.find("#"+e+"-"+r).attr("selected",!0):"fakeSelect"===i?a.find("#"+e+"-"+r).closest("li").addClass(t.set.selectedClass):a.find("#"+e+"-"+r).addClass(t.set.selectedClass)}else"select"===i||"multiSelect"===i?a.find("option").removeAttr("selected"):"fakeSelect"===i?(a.find(".selected").removeClass("selected"),a.find("."+t.set.selectedClass).removeClass(t.set.selectedClass)):a.find("."+t.set.selectedClass).removeClass(t.set.selectedClass),l=a.find("#"+e+"-"+r.replace(/\W/g,"-")),"select"===i||"multiSelect"===i?l.attr("selected",!0):"fakeSelect"===i?(l.closest("li").addClass(t.set.selectedClass),a.find(".fake-select").addClass("selected").find("span").text(l.text())):l.addClass(t.set.selectedClass);void 0!==t.set.onFilterChanged&&t.set.onFilterChanged(t.set.filteredBy)},gatherItems:function(e,t){var a=this,l=/_\d$/,r=a.set.relevantFilters||a.filter.filter,i=0,n=0,o=[],d=[],c=[],p=[];t=t||a.set.filteredBy,e=e||!1;var u=function(e,t){var s=[],i=0,n=parseInt(e.slice(-1),10)-1,o=e.replace(l,""),d=t===a.set.undefinedCatId?void 0:t;for(var c in r[o])0===c.indexOf(a.set.category)&&d===c.split("/")[n]&&(s[i]=r[o][c],i++);return Array.prototype.concat.apply([],s)};for(var f in t)if("page"!==f&&"sort"!==f){if("s1"===t[f].type)d=l.test(f)?u(f,t[f].value):r[f][t[f].value];else if("sor"===t[f].type){for(p=t[f].value.slice(0),p.reverse(),n=0;n<p.length;n++)o[n]=l.test(f)?u(f,p[n]):r[f][p[n]];d=Array.prototype.concat.apply([],o)}else if("sand"===t[f].type)for(n=0;n<t[f].value.length;n++)o[n]=r[f][t[f].value[n]],d=d;c=0===i?d:s.intersect(c,d),o=[],i++}return e?c:(i>0?a.addClass("ysFilter--filtered"):a.removeClass("ysFilter--filtered"),void s.updateFilterHTML.apply(a,[i,c,r]))},updateFilterHTML:function(t,a,l){var r,n,o,d,c,p,u,f,h,g,v,m,C,y=this,b=y.filter.settings.filter,I={},F={};if(0===t)for(y.set.currentItems=JSON.parse(y.set.initItemsStr),y.find("."+y.set.groupClass).find("."+y.set.disabledClass+", ."+y.set.selectedClass).removeClass(y.set.disabledClass+" "+y.set.selectedClass),y.find("."+y.set.groupClass+" option").removeAttr("disabled").filter(":selected").removeAttr("selected"),i=0;i<b.length;i++)I=y.find("#"+b[i][0]),p=I.data("max-length")||null,null!==p&&Object.keys(l[b[i][0]]).length>p&&(y.set.hideAncestor!==!1?I.closest("."+y.set.hideAncestor).addClass("too-many-options"):I.addClass("too-many-options"));else{for(i=0;i<b.length;i++)if(I=y.find("#"+b[i][0]),c=I.data("type")||null,"s1"===c&&y.set.latestCat===b[i][0]||"sor"===c&&1===t&&y.set.latestCat===b[i][0])y.set.resetLatestCat&&(e("#"+y.set.latestCat).find("."+y.set.disabledClass).removeClass(y.set.disabledClass),e("#"+y.set.latestCat).find("option").removeAttr("disabled"),y.set.resetLatestCat=!1);else{if(r=0,n=b[i][0].replace(/_\d$/,""),o=0,d=I.data("create")||null,p=I.data("max-length")||null,g=I.data("depth")-1||null,u="",f={},h=l[n],intersected=[],m=a.slice(),null!==g){for(v in l[n]){var S=[],w=v.split("/");void 0!==w[g]&&(B=w[g],S=void 0===f[B]?[]:f[B],f[B]=Array.prototype.concat.apply(S,l[n][v]))}h=f}void 0!==y.set.filteredBy[b[i][0]]&&"sor"===c&&(C=e.extend(!0,{},y.set.filteredBy),delete C[b[i][0]],newGatheredItems=s.gatherItems.apply(y,[!0,C]),m=Array.prototype.concat.apply(m,newGatheredItems),m=s.unique(m));for(v in h){var B=v.replace(/\W/g,"-");intersected=s.intersect(m,h[v]),F=y.find("#"+b[i][0]+"-"+B),0!==F.length&&(u=F.prop("tagName").toLowerCase(),intersected.length>0?("option"===u||"input"===u?F.removeAttr("disabled"):"fakeSelect"===d?F.closest("li").removeClass(y.set.disabledClass):F.removeClass(y.set.disabledClass),o+=intersected.length,r++):"option"===u||"input"===u?F.attr("disabled",!0):"fakeSelect"===d?F.closest("li").addClass(y.set.disabledClass):F.addClass(y.set.disabledClass))}null!==p&&(r>p?y.set.hideAncestor!==!1?I.closest("."+y.set.hideAncestor).addClass("too-many-options"):I.addClass("too-many-options"):y.set.hideAncestor!==!1?I.closest("."+y.set.hideAncestor).removeClass("too-many-options"):I.removeClass("too-many-options")),r>0?I.removeClass(y.set.disabledClass):I.addClass(y.set.disabledClass)}a=s.unique(a),y.set.currentItems=void 0!==y.filter.related?s.relatedToItems.apply(y,[a,!1]):s.keysToItems.apply(y,[a])}s.sortOrRenderItems.apply(y)},sortOrRenderItems:function(){var e=this;void 0!==e.set.filteredBy.sort&&e.set.currentItems.length>0?s.sortItems.apply(e):e.set.preSort!==!1?s.sortItems.apply(e,[e.set.preSort[0],e.set.preSort[1]]):s.renderItems.apply(e)},sortItems:function(e,t){var a=this,l=a.set.currentItems,r=l.length,i=e||a.set.filteredBy.sort.value[0],n=e&&t?e+"-"+t:a.set.filteredBy.sort.value.join("-"),o=t||a.set.filteredBy.sort.value[1],d=0,c=0,p=0,u=[],f={};for(d=0;r>d;d++)u[d]={obj:l[d]},void 0!==a.filter.related&&l[d].relatedShowMain===!1?(related=s.keysToItems.apply(a,[l[d].relatedShowVariants]),f=related[0]):f=l[d],"price"===i?(p=parseFloat(f.price.priceAsNumber,10),f.price.soldout&&(p="dsc"===o?0:999999999),u[d][i]=p):u[d][i]="news"===i?f.price.newProduct?0:10:f[i],c++;for($item=a.find("#sort-"+n),"fakeSelect"===a.find("#sort").data("create")?$item.closest("li").addClass(a.set.selectedClass):$item.addClass(a.set.selectedClass),u.sort("number"==typeof u[0][i]?function(e,t){return e[i]-t[i]}:function(e,t){return e[i]<t[i]||""===t[i]?-1:e[i]>t[i]?1:0}),"dsc"===o&&u.reverse(),a.set.currentItems=[],d=0;r>d;d++)a.set.currentItems[d]=u[d].obj;s.renderItems.apply(a)},renderItems:function(){var t=this,a=t.set.currentItems,l=a.length,r=null,i=0,n="",o=[];t.set.initialLoad?(i=t.set.appendItems?0:t.set.limit*(t.set.filteredBy.page-1),r=t.set.limit*t.set.filteredBy.page,l=r>l?l:r,t.set.filteredBy.page>1&&t.find("."+t.set.paging.prevBtnClass).removeClass(t.set.disabledClass),l!==r&&t.find("."+t.set.paging.nextBtnClass).addClass(t.set.disabledClass)):"none"!==t.set.limit?l>t.set.limit?(t.set.pages=Math.ceil(l/t.set.limit),r=t.set.limit*t.set.filteredBy.page,i=(t.set.filteredBy.page-1)*t.set.limit,l=r>l?l:r,t.set.filteredBy.page>1?t.find("."+t.set.paging.prevBtnClass).removeClass(t.set.disabledClass):t.find("."+t.set.paging.prevBtnClass).addClass(t.set.disabledClass),l!==r?t.find("."+t.set.paging.nextBtnClass).addClass(t.set.disabledClass):t.find("."+t.set.paging.nextBtnClass).removeClass(t.set.disabledClass)):(t.set.pages=1,t.find("."+t.set.paging.contClass).addClass(t.set.disabledClass)):(t.set.pages=1,t.find("."+t.set.paging.nextBtnClass+",."+t.set.paging.prevBtnClass).addClass(t.set.disabledClass)),t.find("."+t.set.pageTotalClass).text(t.set.pages),t.find("."+t.set.itemTotalClass).text(a.length),t.find("."+t.set.allItemsTotalClass).text(t.set.currentItems.length),t.find("."+t.set.currentTotalClass).text(l);for(var d=i;l>d;d++)t.set.eachItemAttrs&&(a[d]=t.set.eachItemAttrs(t,a[d],d)),t.set.onItemIndex===d&&(n+=t.set.onItem(l)),void 0!==t.set.customRender?o[o.length]={html:s.renderItemTemplate.apply(t,[a[d]]),item:a[d]}:n+=s.renderItemTemplate.apply(t,[a[d]]);t.set.appendItems&&1!==t.set.pages&&1!==t.set.filteredBy.page&&t.set.initialLoad===!1?(void 0!==t.set.beforeItemsRendered&&t.set.beforeItemsRendered("append"),void 0!==t.set.customRender?t.set.customRender("append",t.filter,o):t.find("#"+t.set.itemContId).append(n)):(void 0!==t.set.beforeItemsRendered&&t.set.beforeItemsRendered("replace"),void 0!==t.set.customRender?t.set.customRender("replace",t.filter,o):t.find("#"+t.set.itemContId).html(n)),(void 0===t.set.appendHashValue||t.set.appendHashValue)&&(hash=-1===t.set.currentHash.indexOf("#")?"#"+t.set.currentHash:t.set.currentHash,t.find("#"+t.set.itemContId+" a").each(function(){var t=e(this).attr("href");-1!==t.indexOf("#")&&(t=t.substring(0,t.indexOf("#"))),e(this).attr("href",t+hash)})),t.set.initialLoad=!1,void 0!==t.set.afterItemsRendered&&t.set.afterItemsRendered()},renderItemTemplate:function(t){var a=this,l=a.filter.settings.template.item,r=a.filter.settings.template.price,i=a.filter.settings.template.related,n=a.filter.settings.template.attribute,o="",d="",c={},p=[],u={},f=!0;if(void 0!==a.filter.related&&t.relatedShowMain===!1?(p=s.keysToItems.apply(a,[t.relatedShowVariants]),u=e.extend({},p[0])):u=e.extend({},t),void 0!==i){void 0!==t.related&&t.related.length>0&&(p=s.keysToItems.apply(a,[t.related]));for(d in i){"swatch"===d&&null!==t.swatch&&(f=!t.relatedShowMain,o+=s.renderItemReplace.apply(a,[t,i[d],{idPrefix:t.id+"_",relatedHide:f}]));for(var h=0;h<p.length;h++)if(void 0!==p[h]){if(f=!0,void 0!==a.filter.related&&void 0!==t.relatedShowVariants)for(var g=0;g<t.relatedShowVariants.length;g++)if(t.relatedShowVariants[g]===p[h].id){f=!1;break}void 0!==r&&-1!==i[d].indexOf("{price}")&&"object"==typeof p[h].price&&(p[h].price=s.renderItemPrice.apply(a,[p[h],r])),o+=s.renderItemReplace.apply(a,[p[h],i[d],{idPrefix:t.id+"_",relatedHide:f}])}""!==o&&(u["related_"+d]=o),o=""}}if(void 0!==n)for(d in n){o="";for(var v in u[d])c=e.extend({},u),c[d]=u[d][v],o+=s.renderItemReplace.apply(a,[c,n[d],{}]);u["attribute_"+d]=o}return void 0!==r&&"object"==typeof u.price&&(u.price=s.renderItemPrice.apply(a,[u,r])),l=s.renderItemReplace.apply(a,[u,l,{finalReplace:!0}])},renderItemPrice:function(e,t){var s=this,a="",l="object"==typeof e.price;return l&&0===e.price.priceAsNumber&&!s.set.showZeroPrices?"":(l&&e.price.special&&t.special?(a=t.special,e.classProductNew=e.price.newProduct===!0?" "+s.set.classProductNew:"",e.classProductSale=e.price.showAsOnSale===!0?" "+s.set.classProductSale:""):l&&e.price.soldout&&t.soldout?a=t.soldout:(a=l&&e.price.showAsOnSale&&t.discounted?t.discounted:l&&e.price.newProduct&&t.news?t.news:t.default,e.classProductNew=e.price.newProduct===!0?" "+s.set.classProductNew:"",e.classProductSale=e.price.showAsOnSale===!0?" "+s.set.classProductSale:""),a=a.replace(/\{(.+?)\}/g,function(t,s){return void 0===e.price[s]?"":e.price[s]}))},renderItemReplace:function(e,a,l){var r=this,i=!1,n=l.finalReplace||!1;return e.image="object"==typeof e.image?e.image:[e.image],e.hash=-1===r.set.currentHash.indexOf("#")?"#"+r.set.currentHash:r.set.currentHash,e.root=encodeURIComponent(t.location.origin),e.locale=s.getLocale(),e.category=r.set.category,a=a.replace(/\{(.+?)\}/g,function(t,a){var o,d="",c="",p="",u=[];if("image_"===a.substring(0,6)){if(o=parseInt(a.substring(6))-1,d=e.image[o],void 0===d||null===d)return i=!0,"{#}"}else if("attribute_"!==a.substring(0,10)||n)if(-1!==a.indexOf("|"))switch(a=a.split("|"),a[1]){case"title":d=void 0!==e[a[0]]?s.titleCase(e[a[0]]):""}else d="relatedHide"===a&&void 0!==l.relatedHide?l.relatedHide?r.set.disabledClass:"":"id"===a&&void 0!==l.idPrefix?l.idPrefix+e[a]:void 0!==e[a]?e[a]:"";else u=a.split("_"),c=u[1],p=u.length>2?u[2]:"",null!==e[c]&&"object"==typeof e[c]&&void 0!==e[c].desc&&(d=s.hexOrImage(e[c],p,r.set.forceHex,r.set.swatchClass));return d}),i&&(a=a.replace(/<[^<]*\{#\}[^>]*>/g,"")),a},hexOrImage:function(e,t,s,a){var l="";return void 0===e.image||void 0===e.image.url||s?void 0!==e.hex&&e.hex.replace(/#?([a-f,0-9]{3,6})/gi,function(e,t){l+='<span class="'+a+'" style="background-color: #'+t+';"></span>'}):l="style"===t?'<span class="'+a+'" style="background-image: url('+e.image.url+');"></span>':e.image.url,l},relatedToItems:function(e,t){var s=this,a={},l=[],r={},i=[],n="",o=[],d="",c=0;for(c=0;c<e.length;c++)-1!==e[c].indexOf("_")?(o=e[c].split("_"),void 0===r[o[0]]?r[o[0]]={relatedShowVariants:[o[1]]}:r[o[0]].relatedShowVariants.push(o[1])):(a[e[c]]={relatedShowMain:!0},l[l.length]=e[c]);for(d in r)void 0!==a[d]?a[d].relatedShowVariants=r[d].relatedShowVariants:t||(a[d]=r[d],a[d].relatedShowMain=!1,l[l.length]=d);for(c=0;c<l.length;c++)n=s.filter.productIds[l[c]],i[c]=s.filter.products[n],i[c].relatedShowMain=a[l[c]].relatedShowMain,i[c].relatedShowVariants=a[l[c]].relatedShowVariants;return i},keysToItems:function(e){for(var t=this,s=[],a="",l=0;l<e.length;l++)a=t.filter.productIds[e[l]],void 0!==a&&(s[s.length]=t.filter.products[a]);return s},unique:function(e){var t=[];e:for(var s=0;s<e.length;s++){for(var a=0;a<t.length;a++)if(t[a]==e[s])continue e;t[t.length]=e[s]}return t},intersect:function(e,t){var s=[],a={},l=0;for(l=0;l<e.length;l++)a[e[l]]=!0;for(l=0;l<t.length;l++)a[t[l]]&&(s[s.length]=t[l]);return s},dehashify:function(e){var t=this,s={},a=e.substring(1).split("&"),l=[],r="",i=[];if(e.length>1&&1!==e.indexOf("/"))for(var n=0;n<a.length;n++)if(l=a[n].split("="),"page"===l[0])s.page=parseInt(l[1]);else{switch(r=l[0].split("~"),r[1]){case"sand":i=l[1].split("+");break;case"sor":case"r":case"s":case"f":i=l[1].split(",");break;default:i=l[1]}"sort"!==r[0]&&(t.set.latestCat=r[0]),s[r[0]]={type:r[1],value:i}}return void 0===s.page&&(s.page=1),s},hashify:function(e){var t="",s=null;for(var a in e)if("page"===a)e[a]>1&&(t+=a+"="+e[a]+"&");else{switch(e[a].type){case"sand":s=e[a].value.join("+");break;case"sor":case"s":case"r":case"f":s=e[a].value.join(",");break;default:s=e[a].value}t+=a+"~"+e[a].type+"="+s+"&"}return t=t.substring(0,t.length-1),t.length?t:""},titleCase:function(e){return e.toLowerCase().replace(/^\S|\s\S/g,function(e){return e.toUpperCase()})},getLocale:function(){var e=t.location.pathname.split("/")[1];return/\w/.test(e)?"/"+e:""},urlify:function(e){return e.toLowerCase().replace(/\s{2,}|\s/g,"-")}},a={init:function(a){var i=e.extend({},l,a);return t.requestAnimFrame=function(){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(e){t.setTimeout(e,1e3/60)}}(),this.each(function(){var t=e(this),a=t.data();t.set=e.extend({},i,a,r),t.set.debug===!0&&(console.warn(":::: YS Filter Debug has been set to true ::::"),console.log("Options -> ",t.set),void 0===t.set.url&&console.warn("No url has been defined i.e. loadproducts")),s.init.apply(t),t.data(t.set)})}},l={limit:20,preSort:!1,splitSizes:!1,appendItems:!1,multipleImgs:!1,filterOptions:{},paging:{contClass:"filterPaging",nextBtnClass:"filterPaging-next",prevBtnClass:"filterPaging-prev",allBtnClass:"filterPaging-all"},updateWHash:!1,hideAncestor:!1,repeatStartFakeSelect:!1,outputChosenFiltersId:!1,forceHex:!1,sortFiltersAlphabetically:!1,newsURI:"new-arrivals",saleURI:"sale",undefinedCat:"Unsorted",undefinedCatId:"unsorted",itemContId:"filterItems",selectedClass:"u-selected",disabledClass:"u-disabled",groupClass:"filterControls-group",classProductNew:"product--new",classProductSale:"product--sale",pageTotalClass:"js-pages-total",pageCurrentClass:"js-pages-current",itemTotalClass:"js-items-total",allItemsTotalClass:"js-allItems-total",currentTotalClass:"js-items-current",swatchClass:"colorList-color",alsoMatchChildrenCategories:!1},r={filteredBy:{page:1},currentHash:"",latestCat:"",resetLatestCat:!1,currentItems:[],oldLimit:null,relevantFilters:null,initialLoad:!1,pages:1};e.fn.ysFilter=function(t){return a[t]?a[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist on jQuery.ysFilter"):a.init.apply(this,arguments)}}(jQuery,window);